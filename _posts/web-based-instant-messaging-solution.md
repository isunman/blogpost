---
title: Web端的即时通讯解决方案
tags: [Redis,即时通讯,linux]
categories: 技术日记
---


Web端的即时通讯解决方案

### 首先，确定使用WebSocket技术。
逻辑分析：

1、如果需要支持多个项目，提交登录信息时，需提供当前的项目的ID。
或者不同的项目使用不同的端口，在服务器端启用多个WebSocket的服务。

2、与Redis的结合。

3、作为独立第三方，只负责即时通讯的连接和转发消息，不涉及具体业务逻辑。

### 在Linux服务器上安装配置该技术的步骤：

1、先安装Redis

2、再安装PHP的redis扩展

3、调试功能。

4、Redis的后台运行。

5、PHP文件的命令行执行的后台运行。

### 详细说明每个步骤中遇到的坑

1、安装Redis中没遇到什么问题。Linux时CentOS 7版本，直接使用yum安装即可。

2、注意PHP的redis扩展中的PHP的安装路径。

3、无问题。

4、Redis的后台运行，需要确认进程和端口未被占用。

5、这一步有大坑。PHP文件后台命令行模式一直启动不了。说是命令的路径不对，修改了也不行。后来使用PHP命令的绝对地址才可以启动，暂时先使用。因为此文件不会经常启动。

### 其他注意事项

1、把Redis和server.php文件加入到服务器开机自启动中，Redis可以，server.php不可以。只有暂时手动启动此文件的运行。

2、每次重启服务器一定要注意重启server.php。

3、每次重启服务器，一定要住已清理Redis中与WebSocket相关的缓存数据。

——小永




